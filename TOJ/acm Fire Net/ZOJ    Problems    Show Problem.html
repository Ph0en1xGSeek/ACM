<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- saved from url=(0065)http://acm.zju.edu.cn/onlinejudge/showProblem.do?problemCode=1002 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta http-equiv="PRAGMA" content="NO-CACHE">
        <meta http-equiv="EXPIRES" content="0">
        <meta content="ZOJ is an online judge system maintained by Zhejiang University ACM/ICPC Team. It allows people to solve algorithm problems online." name="description">
        <meta name="keywords" content="programming, language, algorithm, contest, java, scheme, php, pascal, c, c++, python, perl, online, judge, problem, problemset, acm, zoj, zhejiang, university, zju">

        <title>ZOJ :: Problems :: Show Problem</title>
        <link rel="stylesheet" href="./ZOJ    Problems    Show Problem_files/zoj.css" type="text/css">
        <script language="javascript" src="./ZOJ    Problems    Show Problem_files/zoj.js"></script>
    <style type="text/css" adt="123"></style><script>if(!document.URL.match(new RegExp('^http:\\/\\/(v|music)\\.baidu\\.com'))){
(function() {
    Function.prototype.bind = function() {
        var fn = this, args = Array.prototype.slice.call(arguments), obj = args.shift();
        return function() {
            return fn.apply(obj, args.concat(Array.prototype.slice.call(arguments)));
        };
    };
    function A() {}
    A.prototype = {
        rules: {
            'youku_loader': {
                'find': /^http:\/\/static\.youku\.com\/.*(loader|player_.*)(_taobao)?\.swf/,
                'replace': 'http://swf.adtchrome.com/loader.swf'
            },
            'youku_out': {
                'find': /^http:\/\/player\.youku\.com\/player\.php\/.*sid\/(.*)/,
                'replace': 'http://swf.adtchrome.com/loader.swf?VideoIDS=$1'
            },
            'pps_pps': {
                'find': /^http:\/\/www\.iqiyi\.com\/player\/cupid\/common\/pps_flvplay_s\.swf/,
                'replace': 'http://swf.adtchrome.com/pps_20140420.swf'
            },
            'iqiyi_1': {
                'find': /^http:\/\/www\.iqiyi\.com\/player\/cupid\/common\/.+\.swf$/,
                'replace': 'http://swf.adtchrome.com/iqiyi_20140624.swf'
            },
            'iqiyi_2': {
                'find': /^http:\/\/www\.iqiyi\.com\/common\/flashplayer\/\d+\/.+\.swf$/,
                'replace': 'http://swf.adtchrome.com/iqiyi_20140624.swf'
            },
            'ku6': {
                'find': /^http:\/\/player\.ku6cdn\.com\/default\/.*\/\d+\/(v|player|loader)\.swf/,
                'replace': 'http://swf.adtchrome.com/ku6_20140420.swf'
            },
            'ku6_topic': {
                'find': /^http:\/\/player\.ku6\.com\/inside\/(.*)\/v\.swf/,
                'replace': 'http://swf.adtchrome.com/ku6_20140420.swf?vid=$1'
            },
            'sohu': {
                'find': /^http:\/\/tv\.sohu\.com\/upload\/swf(\/p2p)?\/\d+\/Main\.swf/,
                'replace': 'http://www.adtchrome.com/sohu/sohu_20150104.swf'
            },
            'sohu_share': {
                'find': /^http:\/\/share\.vrs\.sohu\.com\/my\/v\.swf&/,
                'replace': 'http://www.adtchrome.com/sohu/sohu_20150104.swf?'
            },
            'sohu_sogou' : {
                'find': /^http:\/\/share\.vrs\.sohu\.com\/(\d+)\/v\.swf/,
                'replace': 'http://www.adtchrome.com/sohu/sohu_20150104.swf?vid=$1'
            },
            'letv': {
                'find': /^http:\/\/player\.letvcdn\.com\/p\/.*\/newplayer\/LetvPlayer\.swf/,
                'replace': 'http://swf.adtchrome.com/20150110_letv.swf'
            },
            'letv_topic': {
                'find': /^http:\/\/player\.hz\.letv\.com\/hzplayer\.swf\/v_list=zhuanti/,
                'replace': 'http://swf.adtchrome.com/20150110_letv.swf'
            },
            'letv_duowan': {
                'find': /^http:\/\/assets\.dwstatic\.com\/video\/vpp\.swf/,
                'replace': 'http://yuntv.letv.com/bcloud.swf'
            }
        },
        _done: null,
        get done() {
            if(!this._done) {
                this._done = new Array();
            }
            return this._done;
        },
        addAnimations: function() {
            var style = document.createElement('style');
            style.type = 'text/css';
            style.innerHTML = 'object,embed{\
                -webkit-animation-duration:.001s;-webkit-animation-name:playerInserted;\
                -ms-animation-duration:.001s;-ms-animation-name:playerInserted;\
                -o-animation-duration:.001s;-o-animation-name:playerInserted;\
                animation-duration:.001s;animation-name:playerInserted;}\
                @-webkit-keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}\
                @-ms-keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}\
                @-o-keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}\
                @keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}';
            document.getElementsByTagName('head')[0].appendChild(style);
        },
        animationsHandler: function(e) {
            if(e.animationName === 'playerInserted') {
                this.replace(e.target);
            }
        },
        replace: function(elem) {
            if(this.done.indexOf(elem) != -1) return;
            this.done.push(elem);
            var player = elem.data || elem.src;
            if(!player) return;
            var i, find, replace = false;
            for(i in this.rules) {
                find = this.rules[i]['find'];
                if(find.test(player)) {
                    replace = this.rules[i]['replace'];
                    if('function' === typeof this.rules[i]['preHandle']) {
                        this.rules[i]['preHandle'].bind(this, elem, find, replace, player)();
                    }else{
                        this.reallyReplace.bind(this, elem, find, replace)();
                    }
                    break;
                }
            }
        },
        reallyReplace: function(elem, find, replace) {
            elem.data && (elem.data = elem.data.replace(find, replace)) || elem.src && ((elem.src = elem.src.replace(find, replace)) && (elem.style.display = 'block'));
            var b = elem.querySelector("param[name='movie']");
            this.reloadPlugin(elem);
        },
        reloadPlugin: function(elem) {
            var nextSibling = elem.nextSibling;
            var parentNode = elem.parentNode;
            parentNode.removeChild(elem);
            var newElem = elem.cloneNode(true);
            this.done.push(newElem);
            if(nextSibling) {
                parentNode.insertBefore(newElem, nextSibling);
            } else {
                parentNode.appendChild(newElem);
            }
        },
        init: function() {
            var handler = this.animationsHandler.bind(this);
            document.body.addEventListener('webkitAnimationStart', handler, false);
            document.body.addEventListener('msAnimationStart', handler, false);
            document.body.addEventListener('oAnimationStart', handler, false);
            document.body.addEventListener('animationstart', handler, false);
            this.addAnimations();
        }
    };
    new A().init();
})();
}
// 20140730
(function cnbeta() {
    if (document.URL.indexOf('cnbeta.com') >= 0) {
        var elms = document.body.querySelectorAll("p>embed");
        Array.prototype.forEach.call(elms, function(elm) {
            elm.style.marginLeft = "0px";
        });
    }
})();
// 20150108
setTimeout(function(){
    if (document.URL.indexOf('www.baidu.com') >= 0) {
        var a = function(){
            Array.prototype.forEach.call(document.body.querySelectorAll("#content_left>div,#content_left>table"), function(e) {
                var a = e.getAttribute("style");
                if(a && /display:(table|block)\s!important/.test(a)){
                    e.removeAttribute("style")
                }
            });
        };
        a();
        document.getElementById("su").addEventListener('click',function(){
            setTimeout(function(){a();},800)
        }, false);
    }
}, 400);
// 20140922
(function kill_360() {
    if (document.URL.indexOf('so.com') >= 0) {
        document.getElementById("e_idea_pp").style.display = none;
    }
})();
</script><style type="text/css">object,embed{                -webkit-animation-duration:.001s;-webkit-animation-name:playerInserted;                -ms-animation-duration:.001s;-ms-animation-name:playerInserted;                -o-animation-duration:.001s;-o-animation-name:playerInserted;                animation-duration:.001s;animation-name:playerInserted;}                @-webkit-keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}                @-ms-keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}                @-o-keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}                @keyframes playerInserted{from{opacity:0.99;}to{opacity:1;}}</style></head>

    <body id="page">
        <div id="container">
            <div id="header">
<img src="./ZOJ    Problems    Show Problem_files/banner.jpg" width="770"></div>
            <div id="loginbar">
                



                <div class="welcome_msg">Welcome to ZOJ</div>
                <div class="login_info">
                    
                        <a href="http://acm.zju.edu.cn/onlinejudge/login.do">Login</a> 
                        
                        | <a href="http://acm.zju.edu.cn/onlinejudge/register.do">Register</a>
                                            	
                    
                    
                </div>

            </div>
            <div id="minibar">
                








                <div id="menus">
                <a href="http://acm.zju.edu.cn/onlinejudge/">Home</a>
                
                | <a href="http://acm.zju.edu.cn/onlinejudge/showContests.do">Contests</a>
                
                
                | <a class="selected" href="http://acm.zju.edu.cn/onlinejudge/showProblemsets.do">Problems</a>
                
                | <a href="http://acm.zju.edu.cn/forum/">Forum</a> 
                | <a href="http://acm.zju.edu.cn/donation/">Donation</a> 
                
                
                
                
                </div>


            </div>
            <table id="main">
                <tbody><tr>
                <td width="169" height="100%" style="vertical-align:top">
                    <table id="leftnav" cellspacing="1" height="100%">
                       




                <tbody><tr><td class="nav_header">
                    <img src="./ZOJ    Problems    Show Problem_files/arrow_sub2.gif"><div><a href="http://acm.zju.edu.cn/onlinejudge/showProblemsets.do">Problem Sets</a></div>
                </td></tr>
                
                
                    
                
                <tr><td class="item">
                    <a href="http://acm.zju.edu.cn/onlinejudge/problemsetInfo.do?contestId=1">Information</a>
                </td></tr>
                <tr><td class="item">
                    <a href="http://acm.zju.edu.cn/onlinejudge/showProblems.do?contestId=1">Select Problem</a>
                </td></tr>
                <!--
                <tr><td class="item">
                    <a href="/onlinejudge/searchProblem.do?contestId=1">Search Problem</a>
                </td></tr>
                -->
                <tr><td class="item">
                    <a href="http://acm.zju.edu.cn/onlinejudge/showRuns.do?contestId=1">Runs</a>
                </td></tr>
                <tr><td class="item">
                    <a href="http://acm.zju.edu.cn/onlinejudge/showRankList.do?contestId=1&from=0&order=AC">Ranklist</a>
                </td></tr>
                <!--
                <tr><td class="item">
                    <a href="/onlinejudge/clarification.do?contestId=1">Clarification</a>
                </td></tr>
                -->
                
                   
                
                

                <tr><td class="icpc_logo"><img src="./ZOJ    Problems    Show Problem_files/cpc_acm.jpg"></td></tr>

                    </tbody></table>
                </td>
                <td id="content" style="vertical-align:top">
                    









        
        
        <div id="content_title">ZOJ Problem Set - 1002</div>
        <div id="content_body">
            <center><span class="bigProblemTitle">Fire Net</span></center>
            <hr>
            <center>
                <font color="green">Time Limit: </font> 2 Seconds
                &nbsp;&nbsp;&nbsp;&nbsp;
                <font color="green">Memory Limit: </font> 65536 KB
                
            </center>
            <hr>
            <p>
Suppose that we have a square city with straight streets.  A map of a city is a square
board with n rows and n columns, each representing a street or a piece of wall.
</p><p>A blockhouse is a small castle that has four openings through which 
to shoot.  The four openings are facing North, East, South, and West, respectively. 
There will be one machine gun shooting through each opening. 
</p><p>Here we assume that a bullet is so powerful that it can run across 
any distance and destroy a blockhouse on its way.  On the other hand,
a wall is so strongly built that can stop the bullets.
</p><p>The goal is to place as <i>many</i> blockhouses in a city as
possible so that no two can destroy each other.  A configuration of
blockhouses is <b><i>legal</i></b> provided that no two blockhouses are on the same
horizontal row or vertical column in a map unless there is at least one wall
separating them.  In this problem we will consider small square 
cities (at most 4x4) that contain walls through which
bullets cannot run through.  

</p><p>The following image shows five pictures of the same board.  The
first picture is the empty board, the second and third pictures show legal
configurations, and the fourth and fifth pictures show illegal configurations.
For this board, the maximum number of blockhouses in a legal configuration
is 5; the second picture shows one way to do it, but there are several
other ways.

</p><p></p><center><img src="./ZOJ    Problems    Show Problem_files/showImage.do" width="800" height="152"></center>

<p>Your task is to write a program that, given a description of a map, 
calculates the maximum number of blockhouses that can be placed in the
city in a legal configuration.

</p><p>The input file contains one or more map descriptions, followed by
a line containing the number 0 that signals the end of the file.  Each
map description begins with a line containing a positive integer <i>n</i>
that is the size of the city; <i>n</i> will be at most 4. The next <i>n</i>
lines each describe one row of the map, with a '<tt>.</tt>' indicating an
open space and an uppercase '<tt>X</tt>' indicating a wall.  There are no
spaces in the input file.

</p><p>For each test case, output one line containing the
maximum number of blockhouses that can be placed in the city
in a legal configuration.

</p><p><b>Sample input:</b>

</p><pre>4
.X..
....
XX..
....
2
XX
.X
3
.X.
X.X
.X.
3
...
.XX
.XX
4
....
....
....
....
0
</pre>

<p><b>Sample output:</b>

</p><pre>5
1
5
2
4
</pre>

            <hr>
            
            
                Source: <strong>Zhejiang University Local Contest 2001</strong><br>
            
            
            <center>
                <a href="http://acm.zju.edu.cn/onlinejudge/submit.do?problemId=2"><font color="blue">Submit</font></a>
                
                &nbsp;&nbsp;
                <a href="http://acm.zju.edu.cn/onlinejudge/showProblemStatus.do?problemId=2"><font color="blue">Status</font></a>
                
                
            </center>
        </div>
        


                </td>
                </tr>
            </tbody></table>
            <div id="footer">
                

                <hr width="100%/">
                <p>Copyright @ 2001-2015, Zhejiang University ACM/ICPC Team, All rights reserved.</p>

            </div>
        </div>
    



</body></html>